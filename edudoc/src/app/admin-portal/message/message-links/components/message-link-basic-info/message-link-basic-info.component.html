<div class="miles-form padded" [@itemAnim] *ngIf="formRenderd">
    <h4>LINK INFO</h4>
    <form [formGroup]="linkForm" *ngIf="linkForm" (ngSubmit)="formSubmitted(linkForm)">
        <div class="row">
            <mt-search-filter-select
            [items]="escs"
            entity="ESCs"
            [maxToShowInSelectedText]="1"
            (selectionChanged)="handleFilterSelections(messageFilterTypeEnums.Esc, $event)"
            ></mt-search-filter-select>
        </div>

        <div class="row">
            <mt-search-filter-select
            *ngIf="filteredSchoolDistricts.length"
            [items]="filteredSchoolDistricts"
            entity="SchoolDistricts"
            [maxToShowInSelectedText]="1"
            (selectionChanged)="handleFilterSelections(messageFilterTypeEnums.SchoolDistrict, $event)"
            ></mt-search-filter-select>
        </div>

        <div class="row" *ngIf="districtsSelected">
            <mt-search-filter-select
            [items]="filteredServiceCodes"
            entity="ServiceCodes"
            [maxToShowInSelectedText]="1"
            (selectionChanged)="handleFilterSelections(messageFilterTypeEnums.ServiceCode, $event)"
            ></mt-search-filter-select>
        </div>

        <div class="row" *ngIf="filteredProviderTitles.length && districtsSelected">
            <mt-search-filter-select
            [items]="filteredProviderTitles"
            entity="ProviderTitles"
            [maxToShowInSelectedText]="1"
            (selectionChanged)="handleFilterSelections(messageFilterTypeEnums.ProviderTitle, $event)"
            ></mt-search-filter-select>
        </div>

        <div class="row" *ngIf="filteredProviders.length">
            <mt-search-filter-select
            [items]="filteredProviders"
            entity="Providers"
            [maxToShowInSelectedText]="1"
            (selectionChanged)="handleFilterSelections(messageFilterTypeEnums.Provider, $event)"
            ></mt-search-filter-select>
        </div>

        <mt-dynamic-field [field]="abstractLinkControls.Description" [form]="linkForm"> </mt-dynamic-field>

        <mt-dynamic-field *ngIf="isProviderTraining" [field]="abstractLinkControls.TrainingTypeId" [form]="linkForm" (valueChanges)="trainingTypeUpdated($event)"> </mt-dynamic-field>
        
        <mt-dynamic-field *ngIf="isProviderTraining && showDueDate" [field]="abstractLinkControls.DueDate" [form]="linkForm"> </mt-dynamic-field>

        <mt-dynamic-field [field]="abstractLinkControls.ValidTill" [form]="linkForm"> </mt-dynamic-field>

        <mt-dynamic-field [field]="abstractLinkControls.Url" [form]="linkForm"> </mt-dynamic-field>

        <br />
        <button type="submit" Class="btn btn-flat btn-success">
            Save
        </button>
    </form>
</div>
